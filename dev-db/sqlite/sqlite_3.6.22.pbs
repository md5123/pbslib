#
# YLmf_OS package build script
#

DESCRIPTION="A in-process library that implements SQL database engine"
HOMEPAGE="http://www.sqlite.org"
SRC_URI=" http://www.sqlite.org/"$N-$V$R".tar.gz "

RDEPEND="readline ncurses"
BDEPEND=" dev-lang/tcl"
OPIONAL="dev-lang/tcl"

pbs_unpack() {
        ypkg_unpack
}

pbs_config() {
	
	patch -Np1 -i $FILES_PATH/files/"$N-$V$R"-build_fix-1.patch
	YPB_CONFIG+=" --prefix=/usr            \
	              --sysconfdir=/etc        \
	              --localstatedir=/var 	\
	              --enable-threadsafe       \
		      --enable-cross-thread-connections \
		      --enable-tempstore=yes   \
		      --enable-load-extension  \
		      --enable-static=no "
	if ! ypkg_config;then
		autoconf
		ypkg_config
	fi
}

pbs_build() {
	ypkg_make
}

pbs_install() {
	ypkg_mkinstall
	install -m755 -d           "$YPPATH_DEST"/usr/share/{man,doc}/"$N-$V$R"
	install -m 0644 sqlite3.1  "$YPPATH_DEST"/usr/share/man/"$N-$V$R"
	cp -a README* VERSION      "$YPPATH_DEST"/usr/share/doc/"$N-$V$R"
}
