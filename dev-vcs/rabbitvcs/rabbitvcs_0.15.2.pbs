#
# StartOS package build script
#
# Copyright 2012 StartOS
# Distributed under the terms of the GNU General Public License v2
#

DESCRIPTION="Integrated version control support for your desktop"
COMMENTS="RabbitVCS is a set of graphical tools written to provide simple and straightforward access to the version control systems you use."
HOMEPAGE="http://rabbitvcs.org"
LICENSE="GPL"
PACKAGER="Zhongxin Huang <huangzhongxin@ivali.com>"

SRC_URI="http://rabbitvcs.googlecode.com/files/"$N-$V".tar.bz2"
CHECKSUM="a9e1e741a3e665e3ce2769b2730fafde26955b53"

RDEPEND="py-nautilus py-gtk py-gobject py-configobj py-dbus meld py-simplejson py-dulwich"
RECOMMENDED="subversion(>=1.4.6) git"
BDEPEND=""
OPTIONAL=""
CONFLICT=""

pbs_unpack() {
   dounpack
}

pbs_install() {
    python setup.py install --root="$PKGDIR" --optimize=1    
    # cli
    cd "$SRCDIR"/clients/cli
    docp rabbitvcs "$PKGDIR"/usr/bin/
    # gedit
    cd "$SRCDIR"/clients/gedit
    docp rabbitvcs.gedit-plugin rabbitvcs-plugin.py "$PKGDIR"/usr/lib/gedit-2/plugins/
    # nautilus
    cd "$SRCDIR"/clients/nautilus-3.0
    docp RabbitVCS.py "$PKGDIR"/usr/share/nautilus-python/extensions/
    # thunar
    cd "$SRCDIR"/clients/thunar
    docp RabbitVCS.py "$PKGDIR"/usr/lib/thunarx-2/python
}
