#
# StartOS package build script
#
# Copyright 2012 StartOS
# Distributed under the terms of the GNU General Public License v2
#

DESCRIPTION="Advanced version control system"
HOMEPAGE="http://subversion.apache.org/"
LICENSE="GPL"
PACKAGER="StartOS Developers"

SRC_URI="http://mirror.bjtu.edu.cn/apache/"$N"/"$N-$V".tar.bz2"

RDEPEND="apr apr-util cyrus-sasl dbus e2fsprogs expat file glib2 glibc keyutils krb5 libgcrypt libgnome-keyring libgpg-error libproxy neon openssl sqlite util-linux-ng zlib"
BDEPEND=""
RECOMMENDED=""

pbs_unpack() {
        dounpack
}

pbs_config() {
	config+="--with-openssl 
	         --with-apr=/usr 
		 --with-apr-util=/usr 
		 --with-zlib=/usr 
		 --with-neon=/usr 
		 --with-apxs 
		 --with-sqlite=/usr 
		 --with-gnome-keyring"
		 #--with-berkeley-db=:/usr/include/:/usr/lib:db-5.2"
	doconfig
}

pbs_build() {
	domake
}

pbs_install() {
	domkinstall
	docp_rename tools/client-side/bash_completion "${destdir}"/etc/bash_completion.d/subversion
}

