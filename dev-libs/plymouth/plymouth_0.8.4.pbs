#
# YLmf_OS package build script
#

DESCRIPTION="graphical boot animation and logger"
HOMEPAGE="http://cgit.freedesktop.org/plymouth/"
LICENSE="GPL"
PACKAGER="Ylmf OS Developers <ylmfos@115.com>"

SRC_URI="http://freedesktop.org/software/plymouth/releases/"$N-$V".tar.bz2"

RDEPEND="atk cairo expat fontconfig freetype gcc gdk-pixbuf glib2 glibc gtk+ libdrm libpciaccess libpng libX11 libXau libxcb libXcomposite libXcursor libXdamage libXdmcp libXext libXfixes libXi libXrandr libXrender pango pixman zlib"
BDEPEND=""
RECOMMENDED="plymouth-theme-ylmf-logo"

INSTALL="$N.install"

pbs_unpack() {
        ypkg_unpack
}

pbs_config() {
	YPB_CONFIG+="--libdir=/lib 
		     --datarootdir=/lib
		     --enable-tracing --disable-tests
  	             --with-background-start-color-stop=0x0073B3           
		     --with-background-end-color-stop=0x00457E            
                     --with-background-color=0x3391cd                      
                     --disable-gdm-transition                              
                     --enable-systemd-integration                          
		     --with-system-root-install
	             --with-rhgb-compat-link                               
		     --without-log-viewer"
		     #--with-logo=%{_datadir}/pixmaps/system-logo-white.png
	ypkg_config
}

pbs_build() {
	ypkg_make
}

pbs_install() {
	ypkg_mkinstall
	
	# For initramfs-tools
	cd "$YPPATH_DEST" 
	ypkg_docp "$FILES_PATH"/files/initramfs-tools usr/share/

	#
	ypkg_doln /lib/plymouth/themes/text/text.plymouth  lib/plymouth/themes/text.plymouth
}

