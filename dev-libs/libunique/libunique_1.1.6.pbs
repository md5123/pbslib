#
# StartOS package build script
#
# Copyright 2012 StartOS
# Distributed under the terms of the GNU General Public License v2
#

DESCRIPTION="The libunique package contains a library for writing single instance applications."
HOMEPAGE="http://live.gnome.org/LibUnique"
LICENSE="LGPL"
PACKAGER="Zhongxin Huang <huangzhongxin@ivali.com>"

SRC_URI="http://ftp.gnome.org/pub/GNOME/sources/"$N"/1.1/"$N-$V".tar.bz2"
CHECKSUM="e5c8041cef8e33c55732f06a292381cb345db946cf792a4ae18aa5c66cdd4fbb"

RDEPEND="gtk2"
BDEPEND="gtk-doc gobject-introspection" 
RECOMMENDED="" 

pbs_unpack() {
    dounpack
}

pbs_patch() {
    dopatch unique-gdbus.patch remove_G_CONST_RETURN.patch
}

pbs_config() {
    config+="--disable-dbus --disable-static"
    autoreconf
    doconfig
}

pbs_build() {
    domake
}

pbs_install() {
    domkinstall
    # Remove documentation, provided by libunique3
    rm -r "$destdir"/usr/share/gtk-doc
}

