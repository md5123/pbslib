Description: Emit Upstart events when starting the login session and desktop session

diff -Nur -x '*.orig' -x '*~' gdm-2.29.5/data/Init.in gdm-2.29.5.new/data/Init.in
--- gdm-2.29.5/data/Init.in	2010-01-14 16:32:56.042957211 +0100
+++ gdm-2.29.5.new/data/Init.in	2010-01-14 16:32:57.472974297 +0100
@@ -11,6 +11,8 @@
 #        /usr/bin/xsplash --gdm-session --daemon
 #fi
 
+/sbin/initctl -q emit login-session-start DISPLAY_MANAGER=gdm
+
 gdmwhich () {
   COMMAND="$1"
   OUTPUT=
diff -Nur -x '*.orig' -x '*~' gdm-2.29.5/data/PreSession.in gdm-2.29.5.new/data/PreSession.in
--- gdm-2.29.5/data/PreSession.in	2010-01-14 16:32:56.042957211 +0100
+++ gdm-2.29.5.new/data/PreSession.in	2010-01-14 16:33:11.456022629 +0100
@@ -12,3 +12,5 @@
 #then
 #        /usr/bin/xsplash --daemon
 #fi
+
+/sbin/initctl -q emit desktop-session-start DISPLAY_MANAGER=gdm
