diff -ur glpng-1.45-ylmf1/src/glpng.c glpng-1.45-ylmf1.new/src/glpng.c
--- glpng-1.45-ylmf1/src/glpng.c	2011-10-21 13:43:49.310764069 +0800
+++ glpng-1.45-ylmf1.new/src/glpng.c	2011-10-21 13:45:27.245958737 +0800
@@ -271,7 +271,7 @@
 	if (pinfo == NULL) return 0;
 
 	fread(header, 1, 8, fp);
-	if (!png_check_sig(header, 8)) return 0;
+	if (png_sig_cmp(header, 0, 8)) return 0;
 
 	png = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
 	info = png_create_info_struct(png);
@@ -375,7 +375,7 @@
 	png_uint_32 i;
 
 	fread(header, 1, 8, fp);
-	if (!png_check_sig(header, 8)) return 0;
+	if (png_sig_cmp(header, 0, 8)) return 0;
 
 	png = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
 	info = png_create_info_struct(png);
