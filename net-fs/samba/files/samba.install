. /usr/lib/ybs/funcs

post_install() {
	ypkg_groupadd -r "nobody" -g 65534
	ypkg_useradd -c "nobody users" -d "/dev/null" -s "/bin/false" -r -N "nobody"
	ypkg_groupadd -r "sambashare"
	ypkg_groupadd -r "users"
	
	# Systemd unit
	for i in winbind.service smbd.service nmbd.service; do
		systemctl enable ${i}
	done

	#
	install -d -m 1770 -g sambashare /var/lib/samba/usershares

	return 0
}       

pre_remove() {
	# Systemd unit
	for i in winbind.service smbd.service nmbd.service; do
		systemctl disable ${i}
	done

	return 0
}

post_remove() {
	ypkg_userdel  "nobody"
	ypkg_groupdel "nobody"
	ypkg_groupdel "users"
	ypkg_groupdel "sambashare"
}

post_upgrade() {
	# Systemd unit
	systemctl --system daemon-reload
	# Systemd unit
	for i in winbind.service smbd.service nmbd.service; do
		systemctl enable ${i}
	done
}

post_downgrade() {
	post_upgrade
}

