#
# Ylmf OS package build script
#
# Copyright 2005-2012 Ylmf OS
# Distributed under the terms of the GNU General Public License v2
#

DESCRIPTION="PyPy is a fast, compliant alternative implementation of the Python language"
HOMEPAGE="http://pypy.org/"
LICENSE="custom/MIT"
PACKAGER="Ylmf OS Developers <ylmfos@ylmf.com>"

SRC_URI="https://bitbucket.org/pypy/pypy/get/release-"$V".tar.bz2"
CHECKSUM="661be06978fdc907d84f0ee1f1228c8b"

RDEPEND=""
RECOMMENDED=""
BDEPEND=""
OPTIONAL=""

pbs_unpack() {
        dounpack
}

pbs_build() {
	cd pypy/translator/goal
	python translate.py -Ojit
}

pbs_install() {
	install -Dm755 pypy-c        "${destdir}"/opt/pypy/pypy-c
	cd "${srcdir}"
	docp lib-python/2.7          "${destdir}"/opt/pypy/lib-python/
	docp lib-python/modified-2.7 "${destdir}"/opt/pypy/lib-python/
	docp lib_pypy                "${destdir}"/opt/pypy/
	docp include                 "${destdir}"/opt/pypy/
	doln /opt/pypy/pypy-c        "${destdir}"/usr/bin/pypy
}

