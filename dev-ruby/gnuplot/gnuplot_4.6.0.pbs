#
# StartOS package build script
#
# Copyright 2012 StartOS
# Distributed under the terms of the GNU General Public License v2
#

DESCRIPTION="Plotting package which outputs to X11, PostScript, PNG, GIF, and others"
HOMEPAGE="http://www.gnuplot.info"
LICENSE="custom"
PACKAGER="Zhongxin Huang <huangzhongxin@ivali.com>"

SRC_URI="http://downloads.sourceforge.net/sourceforge/"$N"/"$N-$V".tar.gz"
CHECKSUM="9a43ae13546d97d4b174533ddac31a14e0edc9b2"

RDEPEND="gd lua wxgtk"
RECOMMENDED=""
BDEPEND=""
OPTIONAL=""
CONFLICT=""
REPLACE=""

INSTALL="$N.install"

pbs_unpack() {
    dounpack
}

pbs_config() {
    config+=" --libexecdir=/usr/bin 
                  --with-gihdir=/usr/share/gnuplot 
          --datadir=/usr/share 
          --with-readline=gnu 
          --with-texdir="$PKGDIR"/usr/share/texmf/tex/latex/gnuplot "
    doconfig
}

pbs_build() {
    domake pkglibexecdir=/usr/bin
}

pbs_install() {
    make prefix="$PKGDIR"/usr libexecdir="$PKGDIR"/usr/bin \
         mandir="$PKGDIR"/usr/share/man \
         infodir="$PKGDIR"/usr/share/info \
         pkglibexecdir="$PKGDIR"/usr/bin \
         GIHDIR="$PKGDIR"/usr/share/gnuplot \
         datadir="$PKGDIR"/usr/share install

    dodoc Copyright
    install -Dm644 lisp/dotemacs "$PKGDIR"/usr/share/emacs/site-lisp/dotemacs

    rm -f "$PKGDIR"/usr/share/texmf-dist/ls-R
}

