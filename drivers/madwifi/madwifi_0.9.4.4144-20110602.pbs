#
# YLmf_OS package build script
#

DESCRIPTION="Next Generation driver for Atheros based IEEE 802.11a/b/g wireless LAN cards"
HOMEPAGE="http://www.madwifi-project.org/"
LICENSE="GPL"
PACKAGER="Ylmf OS Developers <ylmfos@115.com>"

SRC_URI="http://snapshots.madwifi-project.org/madwifi-0.9.4-current.tar.gz"

PROVIDE="$N-source $N-driver $N-utils"

pbs_unpack() {
        ypkg_unpack
}

pbs_config() {
	ypkg_patch madwifi-utils-install-dir.patch
}

madwifi-source_install() {
	DESCRIPTION="Next Generation driver for Atheros based IEEE 802.11a/b/g wireless LAN cards (source)."
	RECOMMENDED="build-essential"
	INSTALL="$N.install"
	OPINION="nodev"
        YARCH="any"
	
	ypkg_dosrc *
	ypkg_doykms
	ypkg_dosupported "${N}_supported"
}

madwifi-driver_install() {
	DESCRIPTION="Next Generation driver for Atheros based IEEE 802.11a/b/g wireless LAN cards (kernel module)."
	BDEPEND=""
	INSTALL="$N.install"
	
	unset ARCH
	ypkg_make modules
	make DESTDIR="$YPPATH_DEST" install-modules
}

madwifi-utils_install() {
	DESCRIPTION="Next Generation driver for Atheros based IEEE 802.11a/b/g wireless LAN cards (source)."
	INSTALL=""

	ypkg_make tools
	make DESTDIR="$YPPATH_DEST" install-tools
}

