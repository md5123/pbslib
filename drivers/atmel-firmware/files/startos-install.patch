diff -ur atmel-firmware-1.3/install.sh atmel-firmware-1.3.new/install.sh
--- atmel-firmware-1.3/install.sh	2005-05-08 03:56:28.000000000 +0800
+++ atmel-firmware-1.3.new/install.sh	2011-07-08 09:48:36.869016198 +0800
@@ -1,44 +1,42 @@
 #!/bin/sh -e
 
-if ! test -f /etc/hotplug/firmware.agent; then
-    echo "/etc/hotplug/firmware.agent does not exist:"
-    echo "please install an up-to-date hotplug package and re-try."
-    exit 1
-fi
-
 if [ -d /lib/firmware ] ; then
-    dest=/lib/firmware
+    dest=$DESTDIR/lib/firmware
     if [ -d /usr/lib/hotplug/firmware ] ; then
         echo "Both /usr/lib/hotplug/firmware and /lib/firmware exist:"
         echo "Assuming /lib/firmware is the correct choice."
     fi
 else
-    dest=/usr/lib/hotplug/firmware
+    dest=$DESTDIR/usr/lib/hotplug/firmware
     if [ ! -d /usr/lib/hotplug/firmware ] ; then
         echo "Neither /usr/lib/hotplug/firmware or /lib/firmware exist:"
         echo "Assuming /usr/lib/hotplug/firmware is the correct choice."
-        mkdir -p /usr/lib/hotplug/firmware
+        mkdir -p $DESTDIR/usr/lib/hotplug/firmware
     fi
 fi 
 
 echo "Installing new firmware files in $dest"
+mkdir -p $dest
 cp images/* $dest
 cp images.usb/* $dest
 
-echo "Installing firmware loader in /usr/sbin/atmel_fwl"
-install -m 755 atmel_fwl.pl /usr/sbin/atmel_fwl
-install -m 644 atmel_fwl.8 /usr/share/man/man8
-
-if [ -f /etc/pcmcia/atmel.conf ] && \
-    ! fgrep -q atmel_cs /etc/pcmcia/atmel.conf; then
+echo "Installing firmware loader in $DESTDIR/usr/sbin/atmel_fwl"
+mkdir -p $DESTDIR/usr/sbin/ $DESTDIR/usr/share/man/man8
+install -m 755 atmel_fwl.pl $DESTDIR/usr/sbin/atmel_fwl
+install -m 644 atmel_fwl.8 $DESTDIR/usr/share/man/man8
+
+mkdir -p $DESTDIR/etc/pcmcia/
+if [ -f $DESTDIR/etc/pcmcia/atmel.conf ] && \
+    ! fgrep -q atmel_cs $DESTDIR/etc/pcmcia/atmel.conf; then
     echo "Saving atmelwlandriver-derived atmel.conf as atmel.wlandriver"
-    mv /etc/pcmcia/atmel.conf /etc/pcmcia/atmel.wlandriver
+    mv $DESTDIR/etc/pcmcia/atmel.conf $DESTDIR/etc/pcmcia/atmel.wlandriver
 fi
 
-echo "Installing PCMCIA config in /etc/pcmcia/atmel.conf"
-install -m 644  atmel.conf /etc/pcmcia
+echo "Installing PCMCIA config in $DESTDIR/etc/pcmcia/atmel.conf"
+install -m 644  atmel.conf $DESTDIR/etc/pcmcia
 
 if [ -f /var/run/cardmgr.pid ]; then
     echo "Re-reading PCMCIA configuration"
     kill -HUP `cat /var/run/cardmgr.pid`
 fi
+
