#
# YLmf_OS package build script
#

DESCRIPTION="The multimedia framework for KDE"
HOMEPAGE="http://phonon.kde.org"
LICENSE="LGPL"
PACKAGER="Ylmf OS Developers <ylmfos@115.com>"

SRC_URI="ftp://ftp.kde.org/pub/kde/stable/"$N"/"$V"/src/"$N-$V".tar.xz"
CHECKSUM="bbe0c1c62ed14c31479c4c1a6cf1e173"

RDEPEND="attr dbus expat flac fontconfig freetype gcc-lib glib2 glibc gst-plugins-base gstreamer json-c libcap libffi libICE libogg libpng libqzeitgeist libSM libsndfile libvorbis libX11 libXau libxcb libXdmcp libXext libXi libxml2 libXrender libXtst openssl pulseaudio qt-core sqlite util-linux-ng zlib"
BDEPEND="cmake"

pbs_unpack() {
        dounpack
}

pbs_patch() {
	dopatch fix-plugindir-for-qt-app.patch
}

pbs_config() {
	doconfig -DCMAKE_BUILD_TYPE=Release \
		 -DCMAKE_SKIP_RPATH=ON \
		 -DPHONON_QT_MKSPECS_INSTALL_DIR=/usr/share/qt4/mkspecs/modules \
		 -DPHONON_QT_PLUGIN_INSTALL_DIR=/usr/lib/qt4/plugins/designer
}

pbs_build() {
	domake
}

pbs_install() {
	domkinstall
}

