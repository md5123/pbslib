From: Christoph Feck <christoph@maxiom.de>
Date: Tue, 29 May 2012 13:53:18 +0000
Subject: Two deprecated calls have been removed from ffmpeg 0.11.
X-Git-Tag: v4.8.80
X-Git-Url: http://quickgit.kde.org/?p=ffmpegthumbs.git&amp;a=commitdiff&amp;h=4f03b20614c122e3e14473d42a000c0bffdce39c
---
Two deprecated calls have been removed from ffmpeg 0.11.

BUG:300732
---

diff -ur kdemultimedia-4.8.4/ffmpegthumbs/ffmpegthumbnailer/moviedecoder.cpp kdemultimedia-4.8.4.new//ffmpegthumbs/ffmpegthumbnailer/moviedecoder.cpp
--- kdemultimedia-4.8.4/ffmpegthumbs/ffmpegthumbnailer/moviedecoder.cpp	2012-06-06 09:35:29.732095499 +0000
+++ kdemultimedia-4.8.4.new//ffmpegthumbs/ffmpegthumbnailer/moviedecoder.cpp	2012-06-29 11:08:05.245705399 +0000
@@ -52,12 +52,12 @@
 void MovieDecoder::initialize(const QString& filename)
 {
     av_register_all();
-    avcodec_init();
     avcodec_register_all();
 
     QFileInfo fileInfo(filename);
 
-    if ((!m_FormatContextWasGiven) && av_open_input_file(&m_pFormatContext, fileInfo.absoluteFilePath().toUtf8().data(), NULL, 0, NULL) != 0) {
+    if ((!m_FormatContextWasGiven) && avformat_open_input(&m_pFormatContext, fileInfo.absoluteFilePath().toLocal8Bit().data(), NULL, NULL) != 0) {
+
         kDebug() <<  "Could not open input file: " << fileInfo.absoluteFilePath();
         return;
     }
