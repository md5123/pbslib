diff -ur grub2-1.99-ylmf5/po/zh_CN.po grub2-1.99-ylmf5.new//po/zh_CN.po
--- grub2-1.99-ylmf5/po/zh_CN.po	2011-05-14 20:59:24.000000000 +0000
+++ grub2-1.99-ylmf5.new//po/zh_CN.po	2012-06-19 11:13:07.996216731 +0000
@@ -2048,7 +2048,7 @@
 
 #: util/grub.d/10_kfreebsd.in:74
 msgid "%s, with kFreeBSD %s (recovery mode)"
-msgstr "%s，kFreeBSd %s (恢复模式)"
+msgstr "%s，kFreeBSd %s (修复模式)"
 
 #: util/grub.d/10_kfreebsd.in:76
 msgid "%s, with kFreeBSD %s"
@@ -2060,11 +2060,15 @@
 
 #: util/grub.d/10_linux.in:69
 msgid "%s, with Linux %s (recovery mode)"
-msgstr "%s，Linux %s (恢复模式)"
+msgstr "%s，内核 %s (修复模式)"
+
+#: util/grub.d/10_linux.in:61
+msgid "%s, with Linux %s (xforcevesa mode)"
+msgstr "%s，内核 %s (图形修复模式)"
 
 #: util/grub.d/10_linux.in:71
 msgid "%s, with Linux %s"
-msgstr "%s，Linux %s"
+msgstr "%s，内核 %s"
 
 #: util/grub.d/10_linux.in:116 util/grub.d/20_linux_xen.in:85
 msgid "Loading Linux %s ..."
@@ -2076,7 +2080,7 @@
 
 #: util/grub.d/10_netbsd.in:98
 msgid "%s, with kernel %s (via %s, recovery mode)"
-msgstr "%s，%s 内核(通过 %s，恢复模式)"
+msgstr "%s，%s 内核(通过 %s，修复模式)"
 
 #: util/grub.d/10_netbsd.in:100
 msgid "%s, with kernel %s (via %s)"
@@ -2084,7 +2088,7 @@
 
 #: util/grub.d/20_linux_xen.in:71
 msgid "%s, with Xen %s and Linux %s (recovery mode)"
-msgstr "%s，Xen %s 和 Linux %s (恢复模式)"
+msgstr "%s，Xen %s 和 Linux %s (修复模式)"
 
 #: util/grub.d/20_linux_xen.in:73
 msgid "%s, with Xen %s and Linux %s"
diff -ur grub2-1.99-ylmf5/util/grub.d/00_header.in grub2-1.99-ylmf5.new//util/grub.d/00_header.in
--- grub2-1.99-ylmf5/util/grub.d/00_header.in	2011-12-05 14:43:45.000000000 +0000
+++ grub2-1.99-ylmf5.new//util/grub.d/00_header.in	2012-06-19 11:11:47.873882348 +0000
@@ -17,6 +17,7 @@
 # You should have received a copy of the GNU General Public License
 # along with GRUB.  If not, see <http://www.gnu.org/licenses/>.
 
+export PATH=$PATH
 transform="@program_transform_name@"
 
 prefix=@prefix@
@@ -142,6 +143,7 @@
 
 # Gettext variables and module
 if [ "x${LANG}" != "xC" ] && [ -d "${locale_dir}" ] ; then
+    echo "Setting lang: ${grub_lang}" >&2
     prepare_grub_to_access_device $(${grub_probe} --target=device ${locale_dir}) | sed -e "s/^/  /"
   cat << EOF
   set locale_dir=(\$root)$(make_system_path_relative_to_its_root ${locale_dir})
@@ -233,7 +235,7 @@
 {
     cat << EOF
 if [ "\${recordfail}" = 1 ]; then
-  set timeout=-1
+  set timeout=10
 else
   set timeout=${2}
 fi
diff -ur grub2-1.99-ylmf5/util/grub.d/10_linux.in grub2-1.99-ylmf5.new//util/grub.d/10_linux.in
--- grub2-1.99-ylmf5/util/grub.d/10_linux.in	2011-12-29 03:55:47.000000000 +0000
+++ grub2-1.99-ylmf5.new//util/grub.d/10_linux.in	2012-06-19 10:54:59.304678756 +0000
@@ -17,6 +17,7 @@
 # You should have received a copy of the GNU General Public License
 # along with GRUB.  If not, see <http://www.gnu.org/licenses/>.
 
+export PATH=$PATH
 prefix=@prefix@
 exec_prefix=@exec_prefix@
 bindir=@bindir@
@@ -80,16 +81,19 @@
 {
   os="$1"
   version="$2"
-  recovery="$3"
+  mode="$3"
   args="$4"
-  if ${recovery} ; then
-    title="$(gettext_quoted "%s, with Linux %s (recovery mode)")"
-  else
-    title="$(gettext_quoted "%s, with Linux %s")"
-  fi
+  case $mode in
+      recovery)
+          title="$(gettext_quoted "%s, with Linux %s (recovery mode)")" ;;
+      xforcevesa)
+          title="$(gettext_quoted "%s, with Linux %s (xforcevesa mode)")" ;;
+       normal|*)
+           title="$(gettext_quoted "%s, with Linux %s")"
+  esac
   printf "menuentry '${title}' ${CLASS} {\n" "${os}" "${version}"
   cat << EOF
-	recordfail
+  	recordfail
 EOF
   if ! ${recovery} ; then
       save_default_entry | sed -e "s/^/\t/"
@@ -228,19 +232,24 @@
     linux_root_device_thisversion=${GRUB_DEVICE}
   fi
 
-  linux_entry "${OS}" "${version}" false \
+  linux_entry "${OS}" "${version}" normal \
       "${GRUB_CMDLINE_LINUX} ${GRUB_CMDLINE_EXTRA} ${GRUB_CMDLINE_LINUX_DEFAULT}" \
       quiet
   if [ "x${GRUB_DISABLE_RECOVERY}" != "xtrue" ]; then
-    if [ -x /lib/recovery-mode/recovery-menu ]; then
-      linux_entry "${OS}" "${version}" true \
-        "recovery nomodeset ${GRUB_CMDLINE_LINUX}"
-    else
-      linux_entry "${OS}" "${version}" true \
-        "single nomodeset ${GRUB_CMDLINE_LINUX}"
-    fi
+    #if [ -x /lib/recovery-mode/recovery-menu ]; then
+    #  linux_entry "${OS}" "${version}" true \
+    #    "recovery nomodeset ${GRUB_CMDLINE_LINUX}"
+    #else
+      linux_entry "${OS}" "${version}" recovery \
+        "recovery ${GRUB_CMDLINE_LINUX}"
+    #fi
   fi
 
+  if [ "x${GRUB_DISABLE_LINUX_XFORCEVESA}" != "xtrue" ]; then
+        linux_entry "${OS}" "${version}" xforcevesa \
+        "nomodeset xforcevesa ${GRUB_CMDLINE_LINUX} ${GRUB_CMDLINE_EXTRA} ${GRUB_CMDLINE_LINUX_DEFAULT}" \
+            quiet
+  fi
   list=`echo $list | tr ' ' '\n' | grep -vx $linux | tr '\n' ' '`
 
   if [ "$list" ] && ! $in_submenu; then
diff -ur grub2-1.99-ylmf5/util/grub.d/30_os-prober.in grub2-1.99-ylmf5.new//util/grub.d/30_os-prober.in
--- grub2-1.99-ylmf5/util/grub.d/30_os-prober.in	2011-12-05 14:43:45.000000000 +0000
+++ grub2-1.99-ylmf5.new//util/grub.d/30_os-prober.in	2012-06-19 10:54:59.304678756 +0000
@@ -17,6 +17,7 @@
 # You should have received a copy of the GNU General Public License
 # along with GRUB.  If not, see <http://www.gnu.org/licenses/>.
 
+export PATH=$PATH
 prefix=@prefix@
 exec_prefix=@exec_prefix@
 libdir=@libdir@
diff -ur grub2-1.99-ylmf5/util/grub-mkconfig_lib.in grub2-1.99-ylmf5.new//util/grub-mkconfig_lib.in
--- grub2-1.99-ylmf5/util/grub-mkconfig_lib.in	2011-12-05 14:43:44.000000000 +0000
+++ grub2-1.99-ylmf5.new//util/grub-mkconfig_lib.in	2012-06-19 10:54:59.304678756 +0000
@@ -24,6 +24,9 @@
 sbindir="@sbindir@"
 pkgdatadir="${datadir}/`echo "@PACKAGE_TARNAME@" | sed "${transform}"`"
 
+# Parepare for devicemap
+/usr/sbin/grub-mkdevicemap --no-floppy
+
 if test "x$grub_probe" = x; then
   grub_probe="${sbindir}/`echo grub-probe | sed "${transform}"`"
 fi
