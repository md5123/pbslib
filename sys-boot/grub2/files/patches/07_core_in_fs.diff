diff -ur grub2-1.98-ylmf2/util/i386/pc/grub-setup.c grub2-1.98-ylmf2.new/util/i386/pc/grub-setup.c
--- grub2-1.98-ylmf2/util/i386/pc/grub-setup.c	2010-03-07 04:51:37.000000000 +0800
+++ grub2-1.98-ylmf2.new/util/i386/pc/grub-setup.c	2011-05-25 16:16:54.312885939 +0800
@@ -56,6 +56,7 @@
 
 #define DEFAULT_BOOT_FILE	"boot.img"
 #define DEFAULT_CORE_FILE	"core.img"
+#define CORE_IMG_IN_FS         "setup_left_core_image_in_filesystem"
 
 void
 grub_putchar (int c)
@@ -407,6 +408,8 @@
   if (grub_disk_write (dest_dev->disk, 0, 0, GRUB_DISK_SECTOR_SIZE,
 		       boot_img))
     grub_util_error ("%s", grub_errmsg);
+	
+	unlink (DEFAULT_DIRECTORY "/" CORE_IMG_IN_FS);
 
   goto finish;
 
@@ -422,6 +425,9 @@
   if (! force)
     grub_util_error (_("if you really want blocklists, use --force"));
 
+  fp = fopen (DEFAULT_DIRECTORY "/" CORE_IMG_IN_FS, "w");
+  fclose (fp);
+
   /* Make sure that GRUB reads the identical image as the OS.  */
   tmp_img = xmalloc (core_size);
   core_path_dev_full = grub_util_get_path (dir, core_file);
