Description: Check RAID superblock offset
 Fixes spurious "superfluous RAID member" errors.
Author: Anthony DeRobertis <anthony@derobert.net>
Origin: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=610184#20
Bug-Debian: http://bugs.debian.org/610184
Forwarded: yes
Applied-Upstream: http://bazaar.launchpad.net/~vcs-imports/grub/grub2-bzr/revision/3082
Last-Update: 2011-04-01

Index: b/grub-core/disk/mdraid1x_linux.c
===================================================================
--- a/grub-core/disk/mdraid1x_linux.c
+++ b/grub-core/disk/mdraid1x_linux.c
@@ -143,7 +143,8 @@
 			  &sb))
 	return grub_errno;
 
-      if (grub_le_to_cpu32 (sb.magic) != SB_MAGIC)
+      if (grub_le_to_cpu32 (sb.magic) != SB_MAGIC
+	  || grub_le_to_cpu64 (sb.super_offset) != sector)
 	continue;
 
       {
