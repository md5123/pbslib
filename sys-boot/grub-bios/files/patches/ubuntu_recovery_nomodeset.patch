Description: Set nomodeset for recovery mode
 Also disable 'set gfxpayload=keep' even if the system normally supports it.
 .
 https://launchpad.net/ubuntu/+spec/desktop-o-xorg-tools-and-processes
Author: Colin Watson <cjwatson@ubuntu.com>
Forwarded: no
Last-Update: 2012-09-06

diff -ur grub-2.00/util/grub.d/10_linux.in grub-2.00.new/util/grub.d/10_linux.in
--- grub-2.00/util/grub.d/10_linux.in	2013-01-24 10:58:26.972776210 +0800
+++ grub-2.00.new/util/grub.d/10_linux.in	2013-01-24 10:59:29.669452657 +0800
@@ -259,7 +259,7 @@
               "${GRUB_CMDLINE_LINUX} ${GRUB_CMDLINE_LINUX_DEFAULT}"
   if [ "x${GRUB_DISABLE_RECOVERY}" != "xtrue" ]; then
     linux_entry "${OS}" "${version}" recovery \
-                "single ${GRUB_CMDLINE_LINUX}"
+                "single nomodeset ${GRUB_CMDLINE_LINUX}"
   fi
 
   list=`echo $list | tr ' ' '\n' | grep -vx $linux | tr '\n' ' '`
