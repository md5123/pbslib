#
# YLmf_OS package build script
#

DESCRIPTION="Windows header files fro mingw32 C cross-compile"
HOMEPAGE="http://www.mingw.org/"
LICENSE="LGPL"
PACKAGER="<ylmfos@115.com>"

SRC_URI="http://nchc.dl.sourceforge.net/project/mingw/MinGW/BaseSystem/RuntimeLibrary/Win32-API/w32api-3.17/w32api-3.17-2-mingw32-src.tar.lzma
	 http://nchc.dl.sourceforge.net/project/mingw/MinGW/BaseSystem/RuntimeLibrary/MinGW-RT/mingwrt-3.18/mingwrt-3.18-mingw32-src.tar.gz"

RDEPEND=""
BDEPEND="mingw32-binutils"
RECOMMENDED=""

NOTES=""

pbs_unpack() {
	mkdir -p "$N-$VR"
	cd "$N-$VR"
	tar xf "$YPPATH_SOURCE"/w32api-3.17-2-mingw32-src.tar.lzma
	tar xf "$YPPATH_SOURCE"/mingwrt-3.18-mingw32-src.tar.gz
	mkdir -p w32api-3.17-2-mingw32/include
	cp -r mingwrt-3.18-mingw32/include/* w32api-3.17-2-mingw32/include/
}

pbs_config() {
	target="i586-mingw32msvc"
	cd w32api-3.17-2-mingw32/
	export CFLAGS="-mms-bitfields -I"$PWD"/include"
	export PATH="$PATH:/usr/$target/bin/"
	./configure --prefix=/usr/$target --target=$target #--host=$target #--build=$CHOST \
}

pbs_build() {
	ypkg_make
}

pbs_install() {
	make install prefix="$YPPATH_DEST"/usr/$target
}
